<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Calculadora básica</title>
   <link rel="stylesheet" href="styles.css">
</head>
<body>
   <main>
      <h1>Calculadora básica</h1>
      <section class="calculadora-marco">
         <div class="pantalla">
            <p id="operacion"></p>
            <p id="resultado"></p>
         </div>
         <div id="botones-numeros">
            <button id="porcentaje">%</button>
            <button id="c">C</button>
            <button id="borrar"><-</button>
            <button id="division">/</button>
            <button id="siete">7</button>
            <button id="ocho">8</button>
            <button id="nueve">9</button>
            <button id="multiplicacion">x</button>
            <button id="cuatro">4</button>
            <button id="cinco">5</button>
            <button id="seis">6</button>
            <button id="resta">-</button>
            <button id="uno">1</button>
            <button id="dos">2</button>
            <button id="tres">3</button>
            <button id="suma">+</button>
            <button id="cambiodesigno">+/-</button>
            <button id="cero">0</button>
            <button id="punto">.</button>
            <button id="igual">=</button>
         </div>
      </section>
      <footer>Alumno: Raúl Humberto Díaz Fernández <br>Asesor: Sonia Ariadna San Vicente Rinza<br>Universidad Virtual del Estado de Guanajuato</footer>
   </main>
   <script>

     
      let resultado = document.getElementById("resultado");
      resultado.innerText = "0";

      let operacion = document.getElementById("operacion");
      let signo = "";

      let a = "";
      let b = "";
      let ultimoValor = "";
      let ultimoSigno = "";

      
      const porcentaje = document.getElementById("porcentaje");
      const c = document.getElementById("c");
      const borrar = document.getElementById("borrar");

      const suma = document.getElementById("suma");
      const resta = document.getElementById("resta");
      const multiplicacion = document.getElementById("multiplicacion");
      const division = document.getElementById("division");
      const cambioDeSigno = document.getElementById("cambiodesigno");
      const igual = document.getElementById("igual");
      
      const uno = document.getElementById("uno");
      const dos = document.getElementById("dos");
      const tres = document.getElementById("tres");
      const cuatro = document.getElementById("cuatro");
      const cinco = document.getElementById("cinco");
      const seis = document.getElementById("seis");
      const siete = document.getElementById("siete");
      const ocho = document.getElementById("ocho");
      const nueve = document.getElementById("nueve");
      const cero = document.getElementById("cero");
      const punto = document.getElementById("punto");

      c.addEventListener("click", function() {
         resultado.innerText = "0";
         b = "";
         a = "";
         operacion.innerText = "";
      });

      // Arreglo con los números del cero al nueve
      const numeros = [cero, uno, dos, tres, cuatro, cinco, seis, siete, ocho, nueve];

      // Bucle for clásico para recorrer todos los números y asignarles el evento click
      for(let i = 0 ; i < 10 ; i++) {
         numeros[i].addEventListener("click", function() {
            a += ""+i;
            resultado.innerText = a;
         });
      };

      punto.addEventListener("click", function() {
         if (a === "") {
            a = "0.";
         } else if (!a.includes(".")) {
            a += ".";
         }
         resultado.innerText = a;
      });

      borrar.addEventListener("click", function() {
         if(a.length !== 0){
            a = a.substring(0, a.length-1);
         }
         resultado.innerText = a || "0";
      });

      cambioDeSigno.addEventListener("click", function() {        
         if (a !== "" && a !== "0") {
            if (a.startsWith("-")) {
                  a = a.substring(1);
            } else {
                  a = "-" + a;
            }
            resultado.innerText = a;
         }
      });

      suma.addEventListener("click", function() {         
         signo = "+";
         b = a === "" ? resultado.innerText : a;
         operacion.innerText = b + " + ";
         a = "";
      });

      resta.addEventListener("click", function() {
         signo = "-";
         b = a === "" ? resultado.innerText : a;
         operacion.innerText = b + " - ";
         a = "";
      });

      multiplicacion.addEventListener("click", function() {
         signo = "*";
         b = a === "" ? resultado.innerText : a;
         operacion.innerText = b + " * ";
         a = "";
      });

      division.addEventListener("click", function() {
         signo = "/";
         b = a === "" ? resultado.innerText : a;
         operacion.innerText = b + " / ";
         a = "";
      });

      porcentaje.addEventListener("click", function() {
         signo = "%";
         b = a === "" ? resultado.innerText : a;
         operacion.innerText = b + " % ";
         a = "";
      });

      igual.addEventListener("click", function() {
         if (a === "") {
            if (ultimoValor !== "" && ultimoSigno !== "") {
               operacion.innerText = resultado.innerText + " " + ultimoSigno + " " + ultimoValor + " = ";
               if (ultimoSigno === "+") {
                  resultado.innerText = sumar(Number(resultado.innerText), Number(ultimoValor));
               } else if (ultimoSigno === "-") {
                  resultado.innerText = restar(Number(resultado.innerText), Number(ultimoValor));
               } else if (ultimoSigno === "*") {
                  resultado.innerText = multiplicar(Number(resultado.innerText), Number(ultimoValor));
               } else if (ultimoSigno === "/") {
                  resultado.innerText = dividir(Number(resultado.innerText), Number(ultimoValor));
               } else if (ultimoSigno === "%") {
                  resultado.innerText = calcularPorcentaje(Number(resultado.innerText), Number(ultimoValor));
               }
            }
            return;
         }

         operacion.innerText = b + " " + signo + " " + resultado.innerText + " = ";
         if(signo === "+"){
            resultado.innerText = sumar(Number(b), Number(resultado.innerText));
         } else if (signo === "-") {
            resultado.innerText = restar(Number(b), Number(resultado.innerText));
         } else if (signo === "*") {
            resultado.innerText = multiplicar(Number(b), Number(resultado.innerText));
         } else if (signo === "/") {
            resultado.innerText = dividir(Number(b), Number(resultado.innerText));
         } else if (signo === "%") {
            resultado.innerText = calcularPorcentaje(Number(b), Number(resultado.innerText));
         }
         ultimoValor = a;
         ultimoSigno = signo;
         a = "";
      });

      // Funciones para operaciones aritméticas
      function sumar(a, b) {
         return a + b;
      };

      function restar(a, b) {
         return a - b;
      };

      function multiplicar(a, b) {
         return a * b;
      };

      function dividir(a, b) {
         return a / b;
      };

      function calcularPorcentaje(a, b) {
         return (a*b)/100;
      }

      function limpiar() {
         resultado.innerText = "";
      }

      function limpiarOperacion() {
         operacion.innerHTML = "";
      }
   </script>
</body>
</html>